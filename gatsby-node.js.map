{"version":3,"file":"gatsby-node.js","names":["handleCreateNodeFromData","item","nodeType","helpers","nodeMetadata","id","createNodeId","bigcommerce_id","parent","children","internal","type","content","handleConversionObjectToString","contentDigest","createContentDigest","node","Object","assign","createNode","exports","onPreInit","logLevels","levels","info","colors","addColors","combine","format","timestamp","colorize","simple","logger","createLogger","level","transports","Console","sourceNodes","pluginOptions","actions","endpoints","clientId","secret","storeHash","accessToken","siteUrl","preview","logLevel","agent","responseType","headers","sanitizedSiteUrl","handleConversionStringToLowercase","sanitizedLogLevel","sanitizeResponseType","error","debug","errMessage","BC","BigCommerce","keys","length","Promise","all","entries","map","nodeName","endpoint","get","then","res","resData","Array","isArray","data","datum","catch","err","Error","finally","IS_DEV","body","scope","is_active","destination","BIGCOMMERCE_WEBHOOK_API_ENDPOINT","post","server","micro","req","json","request","productId","newProduct","nodeToUpdate","end","listen","exitMessage","onCreateDevServer","app","use","createProxyMiddleware","target","secure"],"sources":["src/gatsby-node.js"],"sourcesContent":["/* eslint-disable no-undef */\n\"use strict\";\n\nimport { createProxyMiddleware } from \"http-proxy-middleware\";\nimport micro from \"micro\";\nimport { addColors, createLogger, format, transports } from \"winston\";\nimport { BIGCOMMERCE_WEBHOOK_API_ENDPOINT, IS_DEV } from \"./constants\";\nimport BigCommerce from \"./utils/bigcommerce\";\nimport { handleConversionObjectToString, handleConversionStringToLowercase } from \"./utils/convertValues\";\n\n/**\n * ============================================================================\n * Helper functions and constants\n * ============================================================================\n */\nconst handleCreateNodeFromData = (item, nodeType, helpers) => {\n\tconst nodeMetadata = {\n\t\t...item,\n\t\tid: helpers.createNodeId(`${nodeType}-${item.id}`),\n\t\tbigcommerce_id: item.id,\n\t\tparent: null,\n\t\tchildren: [],\n\t\tinternal: {\n\t\t\ttype: nodeType,\n\t\t\tcontent: handleConversionObjectToString(item),\n\t\t\tcontentDigest: helpers.createContentDigest(item)\n\t\t}\n\t};\n\n\tconst node = Object.assign({}, item, nodeMetadata);\n\n\thelpers.createNode(node);\n\n\treturn node;\n};\n\n/**\n * ============================================================================\n * Verify plugin loads and check for required plugin options\n * ============================================================================\n */\nexports.onPreInit = () => {\n\t// Add custom log levels\n\tconst logLevels = {\n\t\tlevels: {\n\t\t\tinfo: 1\n\t\t},\n\t\tcolors: {\n\t\t\tinfo: \"bold green\"\n\t\t}\n\t};\n\n\t// Add console colors\n\taddColors(logLevels.colors);\n\n\tconst { combine, timestamp, colorize, simple } = format;\n\n\t// Init `winston` logger\n\tconst logger = createLogger({\n\t\tlevel: \"info\",\n\t\tlevels: logLevels.levels,\n\t\tformat: combine(colorize(), simple(), timestamp()),\n\t\ttransports: [new transports.Console()]\n\t});\n\n\tlogger.info(\"`gatsby-source-bigcommerce` plugin loaded successfully.\");\n};\n\n/**\n * ============================================================================\n * Source and cache nodes from the BigCommerce API\n * ============================================================================\n */\nexports.sourceNodes = async ({ actions, createNodeId, createContentDigest }, pluginOptions) => {\n\tconst { createNode } = actions;\n\tconst { endpoints = null, clientId = null, secret = null, storeHash = null, accessToken = null, siteUrl = null, preview = false, logLevel = \"info\", agent = null, responseType = \"json\", headers = {} } = pluginOptions;\n\n\tconst helpers = Object.assign({}, actions, {\n\t\tcreateContentDigest,\n\t\tcreateNodeId\n\t});\n\n\tconst sanitizedSiteUrl = handleConversionStringToLowercase(siteUrl);\n\tconst sanitizedLogLevel = handleConversionStringToLowercase(logLevel);\n\tconst sanitizeResponseType = handleConversionStringToLowercase(responseType);\n\n\t// Add custom log levels\n\tconst logLevels = {\n\t\tlevels: {\n\t\t\terror: 0,\n\t\t\tdebug: 1,\n\t\t\tinfo: 2\n\t\t},\n\t\tcolors: {\n\t\t\terror: \"bold red\",\n\t\t\tdebug: \"bold blue\",\n\t\t\tinfo: \"bold green\"\n\t\t}\n\t};\n\n\t// Add console colors\n\taddColors(logLevels.colors);\n\n\tconst { combine, timestamp, colorize, simple } = format;\n\n\t// Init `winston` logger\n\tconst logger = createLogger({\n\t\tlevel: sanitizedLogLevel,\n\t\tlevels: logLevels.levels,\n\t\tformat: combine(colorize(), simple(), timestamp()),\n\t\ttransports: [new transports.Console()]\n\t});\n\n\t// Custom variables\n\tlet errMessage = \"\";\n\n\tlogger.info(\"Checking BigCommerce plugin options...\");\n\n\tif (endpoints !== null && clientId !== null && secret !== null && storeHash !== null && accessToken !== null) {\n\t\t// Init new `BigCommerce` instance\n\t\tconst BC = new BigCommerce({\n\t\t\tclientId: clientId,\n\t\t\taccessToken: accessToken,\n\t\t\tsecret: secret,\n\t\t\tstoreHash: storeHash,\n\t\t\tresponseType: sanitizeResponseType,\n\t\t\tlogger: logger,\n\t\t\tagent: agent,\n\t\t\theaders: headers\n\t\t});\n\n\t\t// Handle fetching and creating nodes for a single or multiple endpoints\n\t\tif (endpoints && typeof endpoints === \"object\" && Object.keys(endpoints).length > 0) {\n\t\t\t// Send log message when fetching data\n\t\t\tlogger.info(\"Valid plugin options found. Proceeding with plugin initialization...\");\n\t\t\tlogger.info(\"Requesting endpoint data...\");\n\n\t\t\tawait Promise.all(\n\t\t\t\tObject.entries(endpoints).map(([nodeName, endpoint]) => {\n\t\t\t\t\treturn BC.get(endpoint).then((res) => {\n\t\t\t\t\t\t// If the data object is not on the response, it could be `v2` which returns an array as the root, so use that as a fallback\n\t\t\t\t\t\tconst resData = \"data\" in res && Array.isArray(res.data) ? res.data : res;\n\n\t\t\t\t\t\t// Handle generating nodes\n\t\t\t\t\t\treturn \"data\" in res && Array.isArray(res.data)\n\t\t\t\t\t\t\t? resData.map((datum) => handleCreateNodeFromData(datum, nodeName, helpers))\n\t\t\t\t\t\t\t: Array.isArray(res)\n\t\t\t\t\t\t\t? res.map((datum) => handleCreateNodeFromData(datum, nodeName, helpers))\n\t\t\t\t\t\t\t: handleCreateNodeFromData(resData, nodeName, helpers);\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t)\n\t\t\t\t.then(() => {\n\t\t\t\t\t// Send log message when all endpoints have been fetched\n\t\t\t\t\tlogger.info(\"All endpoint data have been fetched successfully.\");\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\t// Send log message when an error occurs\n\t\t\t\t\terrMessage = new Error(`An error occurred while fetching endpoint data. ${err}`);\n\t\t\t\t})\n\t\t\t\t.finally(() =>\n\t\t\t\t\t// Send log message when fetching data is complete\n\t\t\t\t\tlogger.info(\"Requesting endpoint data complete.\")\n\t\t\t\t);\n\t\t} else {\n\t\t\terrMessage = new Error(\"The `endpoints` object is required to make any call to the BigCommerce API\");\n\t\t}\n\n\t\tif (IS_DEV && preview && sanitizedSiteUrl !== null) {\n\t\t\tlogger.info(\"Preview mode enabled. Subscribing you to BigCommerce API webhook...\");\n\n\t\t\t// Make a `POST` request to the BigCommerce API to subscribe to its webhook\n\t\t\tconst body = {\n\t\t\t\tscope: \"store/product/updated\",\n\t\t\t\tis_active: true,\n\t\t\t\tdestination: `${sanitizedSiteUrl}/__BCPreview`\n\t\t\t};\n\n\t\t\tawait BC.get(BIGCOMMERCE_WEBHOOK_API_ENDPOINT)\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (\"data\" in res && Object.keys(res.data).length > 0) {\n\t\t\t\t\t\tlogger.info(\"BigCommerce API webhook subscription already exists. Skipping subscription...\");\n\t\t\t\t\t\tlogger.info(\"BigCommerce API webhook subscription complete. Running preview server...\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\t(async () =>\n\t\t\t\t\t\t\tawait BC.post(BIGCOMMERCE_WEBHOOK_API_ENDPOINT, body).then((res) => {\n\t\t\t\t\t\t\t\tif (\"data\" in res && Object.keys(res.data).length > 0) {\n\t\t\t\t\t\t\t\t\tlogger.info(\"BigCommerce API webhook subscription created successfully. Running preview server...\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}))();\n\t\t\t\t\t}\n\n\t\t\t\t\tconst server = micro(async (req, res) => {\n\t\t\t\t\t\tconst request = await micro.json(req);\n\t\t\t\t\t\tconst productId = request.data.id;\n\n\t\t\t\t\t\t// Webhooks don't send any data, so we need to make a request to the BigCommerce API to get the product data\n\t\t\t\t\t\tconst newProduct = await BC.get(`/catalog/products/${productId}`);\n\t\t\t\t\t\tconst nodeToUpdate = newProduct.data;\n\n\t\t\t\t\t\tif (nodeToUpdate.id) {\n\t\t\t\t\t\t\tcreateNode({\n\t\t\t\t\t\t\t\t...nodeToUpdate,\n\t\t\t\t\t\t\t\tid: createNodeId(`${nodeToUpdate?.id ?? `BigCommerceNode`}`),\n\t\t\t\t\t\t\t\tparent: null,\n\t\t\t\t\t\t\t\tchildren: [],\n\t\t\t\t\t\t\t\tinternal: {\n\t\t\t\t\t\t\t\t\ttype: `BigCommerceNode`,\n\t\t\t\t\t\t\t\t\tcontentDigest: createContentDigest(nodeToUpdate)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tlogger.info(`Updated node: ${nodeToUpdate.id}`);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Send a response back to the BigCommerce API\n\t\t\t\t\t\tres.end(\"ok\");\n\t\t\t\t\t});\n\n\t\t\t\t\tserver.listen(8033, logger.info(`Now listening to changes for live preview at /__BCPreview`));\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\terrMessage = new Error(`An error occurred while creating BigCommerce API webhook subscription. ${err}`);\n\t\t\t\t});\n\t\t}\n\t} else {\n\t\t// If `endpoints` is null, throw an error\n\t\tif (endpoints == null) {\n\t\t\terrMessage = new Error(\"The `endpoints` are required to make any call to the BigCommerce API\");\n\t\t}\n\n\t\t// If `clientId` is null, throw an error\n\t\tif (clientId == null) {\n\t\t\terrMessage = new Error(\"The `clientId` is required to make any call to the BigCommerce API\");\n\t\t}\n\n\t\t// If `secret` is null, throw an error\n\t\tif (secret == null) {\n\t\t\terrMessage = new Error(\"The `secret` is required to make any call to the BigCommerce API\");\n\t\t}\n\n\t\t// If `storeHash` is null, throw an error\n\t\tif (storeHash == null) {\n\t\t\terrMessage = new Error(\"The `storeHash` is required to make any call to the BigCommerce API\");\n\t\t}\n\n\t\t// If `accessToken` is null, throw an error\n\t\tif (accessToken == null) {\n\t\t\terrMessage = new Error(\"The `accessToken` is required to make any call to the BigCommerce API\");\n\t\t}\n\t}\n\n\tif (errMessage !== \"\") {\n\t\tconst exitMessage = \"Plugin terminated with errors...\";\n\n\t\tlogger.error(`${exitMessage}`);\n\n\t\tthrow errMessage;\n\t}\n};\n\n/**\n * ============================================================================\n * Create a dev server for previewing the site when `preview` is enabled\n * ============================================================================\n */\nexports.onCreateDevServer = ({ app }) =>\n\tapp.use(\n\t\t\"/__BCPreview/\",\n\t\tcreateProxyMiddleware({\n\t\t\ttarget: `http://localhost:8033`,\n\t\t\tsecure: false\n\t\t})\n\t);\n"],"mappings":"AACA;;;;;;;;;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAOA,IAAMA,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACC,IAAD,EAAOC,QAAP,EAAiBC,OAAjB,EAA6B;EAC7D,IAAMC,YAAY,8BACdH,IADc;IAEjBI,EAAE,EAAEF,OAAO,CAACG,YAAR,CAAwBJ,QAAxB,SAAoCD,IAAI,CAACI,EAAzC,CAFa;IAGjBE,cAAc,EAAEN,IAAI,CAACI,EAHJ;IAIjBG,MAAM,EAAE,IAJS;IAKjBC,QAAQ,EAAE,EALO;IAMjBC,QAAQ,EAAE;MACTC,IAAI,EAAET,QADG;MAETU,OAAO,EAAE,IAAAC,6CAAA,EAA+BZ,IAA/B,CAFA;MAGTa,aAAa,EAAEX,OAAO,CAACY,mBAAR,CAA4Bd,IAA5B;IAHN;EANO,EAAlB;EAaA,IAAMe,IAAI,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBjB,IAAlB,EAAwBG,YAAxB,CAAb;EAEAD,OAAO,CAACgB,UAAR,CAAmBH,IAAnB;EAEA,OAAOA,IAAP;AACA,CAnBD;;AA0BAI,OAAO,CAACC,SAAR,GAAoB,YAAM;EAEzB,IAAMC,SAAS,GAAG;IACjBC,MAAM,EAAE;MACPC,IAAI,EAAE;IADC,CADS;IAIjBC,MAAM,EAAE;MACPD,IAAI,EAAE;IADC;EAJS,CAAlB;EAUA,IAAAE,kBAAA,EAAUJ,SAAS,CAACG,MAApB;EAEA,IAAQE,OAAR,GAAiDC,eAAjD,CAAQD,OAAR;EAAA,IAAiBE,SAAjB,GAAiDD,eAAjD,CAAiBC,SAAjB;EAAA,IAA4BC,QAA5B,GAAiDF,eAAjD,CAA4BE,QAA5B;EAAA,IAAsCC,MAAtC,GAAiDH,eAAjD,CAAsCG,MAAtC;EAGA,IAAMC,MAAM,GAAG,IAAAC,qBAAA,EAAa;IAC3BC,KAAK,EAAE,MADoB;IAE3BX,MAAM,EAAED,SAAS,CAACC,MAFS;IAG3BK,MAAM,EAAED,OAAO,CAACG,QAAQ,EAAT,EAAaC,MAAM,EAAnB,EAAuBF,SAAS,EAAhC,CAHY;IAI3BM,UAAU,EAAE,CAAC,IAAIA,mBAAA,CAAWC,OAAf,EAAD;EAJe,CAAb,CAAf;EAOAJ,MAAM,CAACR,IAAP,CAAY,yDAAZ;AACA,CAzBD;;AAgCAJ,OAAO,CAACiB,WAAR;EAAA,sEAAsB,wBAAuDC,aAAvD;IAAA;;IAAA;MAAA;QAAA;UAAA;YAASC,OAAT,QAASA,OAAT,EAAkBjC,YAAlB,QAAkBA,YAAlB,EAAgCS,mBAAhC,QAAgCA,mBAAhC;YACbI,UADa,GACEoB,OADF,CACbpB,UADa;YAAA,wBAEqLmB,aAFrL,CAEbE,SAFa,EAEbA,SAFa,sCAED,IAFC,kDAEqLF,aAFrL,CAEKG,QAFL,EAEKA,QAFL,sCAEgB,IAFhB,kDAEqLH,aAFrL,CAEsBI,MAFtB,EAEsBA,MAFtB,sCAE+B,IAF/B,kDAEqLJ,aAFrL,CAEqCK,SAFrC,EAEqCA,SAFrC,sCAEiD,IAFjD,kDAEqLL,aAFrL,CAEuDM,WAFvD,EAEuDA,WAFvD,sCAEqE,IAFrE,kDAEqLN,aAFrL,CAE2EO,OAF3E,EAE2EA,OAF3E,sCAEqF,IAFrF,kDAEqLP,aAFrL,CAE2FQ,OAF3F,EAE2FA,OAF3F,sCAEqG,KAFrG,kDAEqLR,aAFrL,CAE4GS,QAF5G,EAE4GA,QAF5G,sCAEuH,MAFvH,iDAEqLT,aAFrL,CAE+HU,KAF/H,EAE+HA,KAF/H,qCAEuI,IAFvI,iDAEqLV,aAFrL,CAE6IW,YAF7I,EAE6IA,YAF7I,sCAE4J,MAF5J,kDAEqLX,aAFrL,CAEoKY,OAFpK,EAEoKA,OAFpK,sCAE8K,EAF9K;YAIf/C,OAJe,GAILc,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBqB,OAAlB,EAA2B;cAC1CxB,mBAAmB,EAAnBA,mBAD0C;cAE1CT,YAAY,EAAZA;YAF0C,CAA3B,CAJK;YASf6C,gBATe,GASI,IAAAC,gDAAA,EAAkCP,OAAlC,CATJ;YAUfQ,iBAVe,GAUK,IAAAD,gDAAA,EAAkCL,QAAlC,CAVL;YAWfO,oBAXe,GAWQ,IAAAF,gDAAA,EAAkCH,YAAlC,CAXR;YAcf3B,SAde,GAcH;cACjBC,MAAM,EAAE;gBACPgC,KAAK,EAAE,CADA;gBAEPC,KAAK,EAAE,CAFA;gBAGPhC,IAAI,EAAE;cAHC,CADS;cAMjBC,MAAM,EAAE;gBACP8B,KAAK,EAAE,UADA;gBAEPC,KAAK,EAAE,WAFA;gBAGPhC,IAAI,EAAE;cAHC;YANS,CAdG;YA4BrB,IAAAE,kBAAA,EAAUJ,SAAS,CAACG,MAApB;YAEQE,OA9Ba,GA8B4BC,eA9B5B,CA8BbD,OA9Ba,EA8BJE,SA9BI,GA8B4BD,eA9B5B,CA8BJC,SA9BI,EA8BOC,QA9BP,GA8B4BF,eA9B5B,CA8BOE,QA9BP,EA8BiBC,MA9BjB,GA8B4BH,eA9B5B,CA8BiBG,MA9BjB;YAiCfC,MAjCe,GAiCN,IAAAC,qBAAA,EAAa;cAC3BC,KAAK,EAAEmB,iBADoB;cAE3B9B,MAAM,EAAED,SAAS,CAACC,MAFS;cAG3BK,MAAM,EAAED,OAAO,CAACG,QAAQ,EAAT,EAAaC,MAAM,EAAnB,EAAuBF,SAAS,EAAhC,CAHY;cAI3BM,UAAU,EAAE,CAAC,IAAIA,mBAAA,CAAWC,OAAf,EAAD;YAJe,CAAb,CAjCM;YAyCjBqB,UAzCiB,GAyCJ,EAzCI;YA2CrBzB,MAAM,CAACR,IAAP,CAAY,wCAAZ;;YA3CqB,MA6CjBgB,SAAS,KAAK,IAAd,IAAsBC,QAAQ,KAAK,IAAnC,IAA2CC,MAAM,KAAK,IAAtD,IAA8DC,SAAS,KAAK,IAA5E,IAAoFC,WAAW,KAAK,IA7CnF;cAAA;cAAA;YAAA;;YA+Cdc,EA/Cc,GA+CT,IAAIC,oBAAJ,CAAgB;cAC1BlB,QAAQ,EAAEA,QADgB;cAE1BG,WAAW,EAAEA,WAFa;cAG1BF,MAAM,EAAEA,MAHkB;cAI1BC,SAAS,EAAEA,SAJe;cAK1BM,YAAY,EAAEK,oBALY;cAM1BtB,MAAM,EAAEA,MANkB;cAO1BgB,KAAK,EAAEA,KAPmB;cAQ1BE,OAAO,EAAEA;YARiB,CAAhB,CA/CS;;YAAA,MA2DhBV,SAAS,IAAI,OAAOA,SAAP,KAAqB,QAAlC,IAA8CvB,MAAM,CAAC2C,IAAP,CAAYpB,SAAZ,EAAuBqB,MAAvB,GAAgC,CA3D9D;cAAA;cAAA;YAAA;;YA6DnB7B,MAAM,CAACR,IAAP,CAAY,sEAAZ;YACAQ,MAAM,CAACR,IAAP,CAAY,6BAAZ;YA9DmB;YAAA,OAgEbsC,OAAO,CAACC,GAAR,CACL9C,MAAM,CAAC+C,OAAP,CAAexB,SAAf,EAA0ByB,GAA1B,CAA8B,iBAA0B;cAAA,IAAxBC,QAAwB;cAAA,IAAdC,QAAc;cACvD,OAAOT,EAAE,CAACU,GAAH,CAAOD,QAAP,EAAiBE,IAAjB,CAAsB,UAACC,GAAD,EAAS;gBAErC,IAAMC,OAAO,GAAG,UAAUD,GAAV,IAAiBE,KAAK,CAACC,OAAN,CAAcH,GAAG,CAACI,IAAlB,CAAjB,GAA2CJ,GAAG,CAACI,IAA/C,GAAsDJ,GAAtE;gBAGA,OAAO,UAAUA,GAAV,IAAiBE,KAAK,CAACC,OAAN,CAAcH,GAAG,CAACI,IAAlB,CAAjB,GACJH,OAAO,CAACN,GAAR,CAAY,UAACU,KAAD;kBAAA,OAAW3E,wBAAwB,CAAC2E,KAAD,EAAQT,QAAR,EAAkB/D,OAAlB,CAAnC;gBAAA,CAAZ,CADI,GAEJqE,KAAK,CAACC,OAAN,CAAcH,GAAd,IACAA,GAAG,CAACL,GAAJ,CAAQ,UAACU,KAAD;kBAAA,OAAW3E,wBAAwB,CAAC2E,KAAD,EAAQT,QAAR,EAAkB/D,OAAlB,CAAnC;gBAAA,CAAR,CADA,GAEAH,wBAAwB,CAACuE,OAAD,EAAUL,QAAV,EAAoB/D,OAApB,CAJ3B;cAKA,CAVM,CAAP;YAWA,CAZD,CADK,EAeJkE,IAfI,CAeC,YAAM;cAEXrC,MAAM,CAACR,IAAP,CAAY,mDAAZ;YACA,CAlBI,EAmBJoD,KAnBI,CAmBE,UAACC,GAAD,EAAS;cAEfpB,UAAU,GAAG,IAAIqB,KAAJ,sDAA6DD,GAA7D,CAAb;YACA,CAtBI,EAuBJE,OAvBI,CAuBI;cAAA,OAER/C,MAAM,CAACR,IAAP,CAAY,oCAAZ,CAFQ;YAAA,CAvBJ,CAhEa;;UAAA;YAAA;YAAA;;UAAA;YA4FnBiC,UAAU,GAAG,IAAIqB,KAAJ,CAAU,4EAAV,CAAb;;UA5FmB;YAAA,MA+FhBE,iBAAA,IAAUlC,OAAV,IAAqBK,gBAAgB,KAAK,IA/F1B;cAAA;cAAA;YAAA;;YAgGnBnB,MAAM,CAACR,IAAP,CAAY,qEAAZ;YAGMyD,IAnGa,GAmGN;cACZC,KAAK,EAAE,uBADK;cAEZC,SAAS,EAAE,IAFC;cAGZC,WAAW,EAAKjC,gBAAL;YAHC,CAnGM;YAAA;YAAA,OAyGbO,EAAE,CAACU,GAAH,CAAOiB,2CAAP,EACJhB,IADI,CACC,UAACC,GAAD,EAAS;cACd,IAAI,UAAUA,GAAV,IAAiBrD,MAAM,CAAC2C,IAAP,CAAYU,GAAG,CAACI,IAAhB,EAAsBb,MAAtB,GAA+B,CAApD,EAAuD;gBACtD7B,MAAM,CAACR,IAAP,CAAY,+EAAZ;gBACAQ,MAAM,CAACR,IAAP,CAAY,0EAAZ;cACA,CAHD,MAGO;gBACN,0DAAC;kBAAA;oBAAA;sBAAA;wBAAA;0BAAA;0BAAA,OACMkC,EAAE,CAAC4B,IAAH,CAAQD,2CAAR,EAA0CJ,IAA1C,EAAgDZ,IAAhD,CAAqD,UAACC,GAAD,EAAS;4BACnE,IAAI,UAAUA,GAAV,IAAiBrD,MAAM,CAAC2C,IAAP,CAAYU,GAAG,CAACI,IAAhB,EAAsBb,MAAtB,GAA+B,CAApD,EAAuD;8BACtD7B,MAAM,CAACR,IAAP,CAAY,sFAAZ;4BACA;0BACD,CAJK,CADN;;wBAAA;0BAAA;;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CAAD;cAMA;;cAED,IAAM+D,MAAM,GAAG,IAAAC,cAAA;gBAAA,sEAAM,kBAAOC,GAAP,EAAYnB,GAAZ;kBAAA;;kBAAA;oBAAA;sBAAA;wBAAA;0BAAA;0BAAA,OACEkB,cAAA,CAAME,IAAN,CAAWD,GAAX,CADF;;wBAAA;0BACdE,OADc;0BAEdC,SAFc,GAEFD,OAAO,CAACjB,IAAR,CAAarE,EAFX;0BAAA;0BAAA,OAKKqD,EAAE,CAACU,GAAH,wBAA4BwB,SAA5B,CALL;;wBAAA;0BAKdC,UALc;0BAMdC,YANc,GAMCD,UAAU,CAACnB,IANZ;;0BAQpB,IAAIoB,YAAY,CAACzF,EAAjB,EAAqB;4BACpBc,UAAU,4BACN2E,YADM;8BAETzF,EAAE,EAAEC,YAAY,2BAAIwF,YAAJ,aAAIA,YAAJ,uBAAIA,YAAY,CAAEzF,EAAlB,kFAFP;8BAGTG,MAAM,EAAE,IAHC;8BAITC,QAAQ,EAAE,EAJD;8BAKTC,QAAQ,EAAE;gCACTC,IAAI,mBADK;gCAETG,aAAa,EAAEC,mBAAmB,CAAC+E,YAAD;8BAFzB;4BALD,GAAV;4BAWA9D,MAAM,CAACR,IAAP,oBAA6BsE,YAAY,CAACzF,EAA1C;0BACA;;0BAGDiE,GAAG,CAACyB,GAAJ,CAAQ,IAAR;;wBAxBoB;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CAAN;;gBAAA;kBAAA;gBAAA;cAAA,IAAf;cA2BAR,MAAM,CAACS,MAAP,CAAc,IAAd,EAAoBhE,MAAM,CAACR,IAAP,6DAApB;YACA,CA1CI,EA2CJoD,KA3CI,CA2CE,UAACC,GAAD,EAAS;cACfpB,UAAU,GAAG,IAAIqB,KAAJ,6EAAoFD,GAApF,CAAb;YACA,CA7CI,CAzGa;;UAAA;YAAA;YAAA;;UAAA;YA0JpB,IAAIrC,SAAS,IAAI,IAAjB,EAAuB;cACtBiB,UAAU,GAAG,IAAIqB,KAAJ,CAAU,sEAAV,CAAb;YACA;;YAGD,IAAIrC,QAAQ,IAAI,IAAhB,EAAsB;cACrBgB,UAAU,GAAG,IAAIqB,KAAJ,CAAU,oEAAV,CAAb;YACA;;YAGD,IAAIpC,MAAM,IAAI,IAAd,EAAoB;cACnBe,UAAU,GAAG,IAAIqB,KAAJ,CAAU,kEAAV,CAAb;YACA;;YAGD,IAAInC,SAAS,IAAI,IAAjB,EAAuB;cACtBc,UAAU,GAAG,IAAIqB,KAAJ,CAAU,qEAAV,CAAb;YACA;;YAGD,IAAIlC,WAAW,IAAI,IAAnB,EAAyB;cACxBa,UAAU,GAAG,IAAIqB,KAAJ,CAAU,uEAAV,CAAb;YACA;;UAhLmB;YAAA,MAmLjBrB,UAAU,KAAK,EAnLE;cAAA;cAAA;YAAA;;YAoLdwC,WApLc,GAoLA,kCApLA;YAsLpBjE,MAAM,CAACuB,KAAP,MAAgB0C,WAAhB;YAtLoB,MAwLdxC,UAxLc;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAtB;;EAAA;IAAA;EAAA;AAAA;;AAiMArC,OAAO,CAAC8E,iBAAR,GAA4B;EAAA,IAAGC,GAAH,SAAGA,GAAH;EAAA,OAC3BA,GAAG,CAACC,GAAJ,CACC,eADD,EAEC,IAAAC,0CAAA,EAAsB;IACrBC,MAAM,yBADe;IAErBC,MAAM,EAAE;EAFa,CAAtB,CAFD,CAD2B;AAAA,CAA5B"}